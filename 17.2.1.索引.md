# 2.索引：是数据库中的一个对象

#### 关键字：index

#####       作用：提高程序的查询效率。

#####       按照索引结构：稠密索引和稀疏索引

#####       按照索引的列的个数：唯一索引和组合索引

#####       按照创建方式：B树索引，位图索引,反向键索引,函数索引

#### 1.B树索引：是数据库中默认的索引方式。

#####          创建语法： create index 索引名 on 表名(列名,列名,...);

#####          使用场景：如果要查询的列的重复率很低，则可以使用B树索引。

#### 2.位图索引：

#####          创建语法：create bitmap index 索引名 on 表名(列名);

#####          使用场景：一般位图索引适用于列的值只有固定的几个，例如：性别，学历，婚姻状况等等。 

#### 3.反向键索引：也是B树索引，可以解决普通的B树索引引发的数据倾斜的问题。

#####          创建语法：create index 索引名 on 表名(列名,列名,...) reverse;

#####          使用场景：如果数据在某一个取余比较集中，导致在正常的B树索引的时候某一个节点上的数据量比较大，所以可以使用反向键来解决该问题。

#### 4.函数索引：基于某一个指定的函数来创建的索引。

#####           语法：create index 索引名 on 表名(函数名(列名));

#####          使用：经常会基于某一个函数来操作一个字段，则可以创建函数索引。



### 创建索引原则：

​    只有合理的创建索引，才可以提高程序的查询效率，如果索引使用的不合理则不光不能提高查询效率，还会降低DML操作效率。         

#####      1.不建议在小表上创建索引。

#####      2.如果某一些字段经常出现在where的过滤条件中，则可以考虑再改字段建立索引。

#####      3.如果经常会对某一些字段进行排序操作，则也可以创建索引。

#####      4.一般会建议在经常进行表关联的字段上创建索引。

#####      5.一定要合理的控制表的索引数量。

#####      6.如果一个表经常进行DML操作，很少查询则不建议创建索引。

#####      7.可以将表和表上的索引放在不同的表空间中，如果在同一个表空间中方便管理，但是在不同的表空间中可以提高表的查询效率。

#####      8.如果where条件后面的过滤条件中有多个索引的列，则只能有一个索引生效。



### 导致索引失效的情况：（可以通过执行计划来查询索引是否生效）

#####      1.在查询数据的时候没有使用索引列进行过滤数据。 

#####      2.查询的数据量如果超过了全表的20%-30%就会触发全表扫描，也就是索引会失效。

#####      3.在查询的时候如果过滤的时候在索引列上使用not或者是不等于等关键字也会导致索引失效。

#####      4.如果在索引列上使用了like关键，并且匹配模式是以“%”开头则索引失效。

#####      5.如果在索引列上使用了函数，则也会导致索引失效（函数索引除外）。

#####      6.如果在索引列上使用了一些算术运算符，也会导致索引失效。





#### --创建一个函数索引

```plsql
CREATE INDEX index_fun_name ON emp(UPPER(ename));
SELECT * FROM emp WHERE upper(ename)='SCOTT';
```



#### --在员工的工资上创建一个反向键索引

```plsql
CREATE INDEX index_sal ON emp(sal) REVERSE;
SELECT * FROM emp WHERE sal=2450.00;
```



#### --在job列上创建一个位图索引

```plsql
CREATE BITMAP INDEX index_job ON emp(job);
SELECT * FROM emp WHERE job='ANALYST';
```





#### --在员工姓名上创建一个B树索引

```plsql
CREATE INDEX index_name ON emp(ename);
SELECT * FROM emp WHERE ename LIKE '%B%';
```


